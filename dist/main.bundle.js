!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=16)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.speed=0,this.posY=0,this.posX=0,this.img=new Image,new.target===e)throw new TypeError("Cannot construct Abstract instances directly")}return n(e,[{key:"moveLeft",value:function(e){this.speed=e,this.posX-=this.speed}},{key:"moveRight",value:function(e){this.speed=e,this.posX+=this.speed}},{key:"moveUp",value:function(e){this.speed=e,this.posY-=this.speed}},{key:"moveDown",value:function(e){this.speed=e,this.posY+=this.speed}}]),e}();t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={fps:60}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={UP:87,DOWN:83,LEFT:65,RIGHT:68,FIRE:32,ESC:27,ENTER:13}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e={dmg0:new Image,dmg1:new Image,dmg2:new Image,dmg3:new Image,dmg4:new Image,shadow:new Image};e.dmg0="./src/res/sprites/player/P38_lvl_1_d0.png",e.dmg1="./src/res/sprites/player/P38_lvl_1_d1.png",e.dmg2="./src/res/sprites/player/P38_lvl_1_d2.png",e.dmg3="./src/res/sprites/player/P38_lvl_1_d3.png",e.dmg4="./src/res/sprites/player/P38_lvl_1_d4.png",e.shadow.src="./src/res/sprites/player/P38_shadow.png";var t={lvl1:new Image,lvl2:new Image};t.lvl1.src="./src/res/sprites/enemy/enemy.png",t.lvl2.src="./src/res/sprites/enemy/enemy2.png";var i=new Image;i.src="./src/res/sprites/bullet/bullet_1.png";var n=new Image;return n.src="./src/res/sprites/backdrop/beach.jpg",{playerSprite:e,enemySprite:t,bulletSprite:i,background:n}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"update",value:function(e){}},{key:"render",value:function(e,t,i){t.clearRect(0,0,i.width,i.height),t.textBaseline="top",t.font="100px Helvetica",t.fillStyle="#ee4024",t.fillText("Game Over",(i.width-t.measureText("Game Over").width)/2,i.height/2-50)}}]),e}();t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={canIShoot:function(){var e=!1;return Math.floor(101*Math.random())/100<.01&&(e=!0),e},canIClone:function(e){var t=.004+e/1e3;return Math.floor(1001*Math.random())/1e3<t},canICloneBoss:function(e){var t=.001+e/1e3;return Math.floor(1001*Math.random())/1e3<t}};t.default=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return Math.min(e.posX+e.img.width,t.posX+t.img.width)-Math.max(e.posX,t.posX)>0&&Math.min(e.posY+e.img.height,t.posY+t.img.height)-Math.max(e.posY,t.posY)>0}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={leftBorder:function(e,t){return t.posX<0},rightBorder:function(e,t){return t.posX+t.img.width>e.width},topBorder:function(e,t){return t.posY<0},bottomBorder:function(e,t){return t.posY+t.img.height>e.height},onScreen:function(e,t){return!(this.bottomBorder(e,t)||this.topBorder(e,t)||this.rightBorder(e,t)||this.leftBorder(e,t))}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.game=t,this.speed=1,this.posY=0,this.posX=0,this.img=new Image}return n(e,[{key:"reDraw",value:function(e,t,i,n){this.posY+=e,i.drawImage(n.resourses.background,this.posX,this.posY),i.drawImage(n.resourses.background,this.posX,this.posY-t.height),this.posY>=t.height&&(this.posY=0)}}]),e}();t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=(n=i(0))&&n.__esModule?n:{default:n};function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var o=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return(e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),e).speed=1,e.health=1,e.direction="down",e.lvl=0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),s(t,[{key:"damage",value:function(e){this.health-=e}},{key:"spawnRandom",value:function(e){this.posX=Math.random()*(e.width-this.img.width)}}]),t}();t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=(n=i(0))&&n.__esModule?n:{default:n};function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var o=function(e){function t(e,i,n,s){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return(r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),r).speed=s,r.posY=i,r.posX=e,r.direction=n,r.damageVal=1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),s(t,[{key:"fly",value:function(e,t){"up"==t&&(this.posY-=e),"down"==t&&(this.posY+=e)}}]),t}();t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=(n=i(0))&&n.__esModule?n:{default:n};function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var o=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return(e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),e).speed=6,e.health=6,e.direction="up",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),s(t,[{key:"damage",value:function(e){this.health-=e}}]),t}();t.default=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=c(i(11)),r=c(i(10)),a=c(i(9)),o=c(i(8)),l=c(i(7)),u=c(i(6)),h=c(i(5));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.game=t,this.height=t.canvas.height,this.width=t.canvas.width,this.frame={width:this.width,height:this.height},this.player=new s.default,this.background=new o.default(t),this.bullets=[],this.enemies=[],this.spawn(),this.lvl=0,this.kills=0,this.isPause=!1}return n(e,[{key:"spawn",value:function(){this.player.posX=this.width/2,this.player.posY=this.height-this.height/100*10,this.player.img.src=this.game.resourses.playerSprite.dmg0}},{key:"togglePause",value:function(){this.isPause?this.isPause=!1:this.isPause=!0}},{key:"update",value:function(e){if(this.game.checkKeyPress(80)&&this.togglePause(),!this.isPause){this.lvl=this.kills;for(var t=this.player,i=0;i<this.enemies.length;i++){for(var n=this.enemies[i],s=0;s<this.bullets.length;s++){var o=this.bullets[s];(0,u.default)(o,n)&&(this.kills+=1,0==s&&this.bullets.shift(),this.bullets.splice(s,s),0==i&&this.enemies.shift(),this.enemies.splice(i,i)),l.default.bottomBorder(this.frame,n)&&(this.enemies.splice(i,i),0==i&&this.enemies.shift())}if((0,u.default)(t,n)&&(this.kills+=1,0==i&&this.enemies.shift(),this.enemies.splice(i,i),t.damage(n.lvl)),h.default.canIShoot()){var c=new r.default(n.posX+n.img.width/2-8,n.posY+n.img.height+14,n.direction,3*n.speed);c.img.src=this.game.resourses.bulletSprite.src,this.bullets.push(c)}n.moveDown(n.speed)}if(h.default.canIClone(this.lvl)){var f=new a.default;f.lvl=1,f.img=this.game.resourses.enemySprite.lvl1,f.spawnRandom(this.frame),this.enemies.push(f)}if(h.default.canICloneBoss(this.lvl)){var p=new a.default;p.lvl=2,p.speed=1.5,p.img.src=this.game.resourses.enemySprite.lvl2.src,p.spawnRandom(this.frame),this.enemies.push(p)}if(this.game.keys[this.game.controls.ESC]&&this.game.setScene(this.game.MenuScene),this.game.checkKeyPress(13)&&(t.health=5),l.default.leftBorder(this.frame,t)||this.game.keys[this.game.controls.LEFT]&&t.moveLeft(t.speed),l.default.rightBorder(this.frame,t)||this.game.keys[this.game.controls.RIGHT]&&t.moveRight(t.speed),l.default.topBorder(this.frame,t)||this.game.keys[this.game.controls.UP]&&this.player.moveUp(t.speed),l.default.bottomBorder(this.frame,t)||this.game.keys[this.game.controls.DOWN]&&this.player.moveDown(t.speed),this.game.checkKeyPress(this.game.controls.FIRE)){var d=new r.default(t.posX+t.img.width/2-8,t.posY-18,t.direction,1.2*t.speed);d.img.src=this.game.resourses.bulletSprite.src,this.bullets.push(d)}switch(t.health){case 6:break;case 5:t.img.src=this.game.resourses.playerSprite.dmg1,t.speed=5;break;case 4:t.img.src=this.game.resourses.playerSprite.dmg2,t.speed=4;break;case 3:t.img.src=this.game.resourses.playerSprite.dmg3,t.speed=3;break;case 2:t.img.src=this.game.resourses.playerSprite.dmg4,t.speed=2;break;case 1:t.speed=1;break;case 0:this.game.setScene(this.game.EndScene);break;default:this.game.setScene(this.game.EndScene)}if(this.bullets.length>0)for(var m=0;m<this.bullets.length;m++){var g=this.bullets[m];l.default.onScreen(this.frame,g)?(g.fly(g.speed,g.direction),(0,u.default)(t,g)&&(t.damage(g.damageVal),this.bullets.splice(m,m),0==m&&this.bullets.shift())):(this.bullets.splice(m,m),0==m&&this.bullets.shift())}}}},{key:"render",value:function(e,t,i){if(t.clearRect(0,0,i.width,i.height),this.isPause?(t.textBaseline="top",t.font="100px Helvetica",t.fillStyle="#ff4024",t.fillText("Game Paused",(i.width-t.measureText("Game Paused").width)/2,i.height/2-50)):this.background.reDraw(1,this.frame,t,this.game),t.drawImage(this.player.img,this.player.posX,this.player.posY),t.drawImage(this.game.resourses.playerSprite.shadow,this.player.posX,this.player.posY+3*this.player.speed),this.enemies.length>0)for(var n=0;n<this.enemies.length;n++){var s=this.enemies[n];t.drawImage(s.img,s.posX,s.posY)}if(this.bullets.length>0)for(var r=0;r<this.bullets.length;r++){var a=this.bullets[r];t.drawImage(a.img,a.posX,a.posY)}t.font="48px serif",t.fillText("your hits: "+this.kills,0,48);var o="your health: "+this.player.health;t.fillText(o,this.frame.width-t.measureText(o).width,48)}}]),e}();t.default=f},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var i=[],n=!0,s=!1,r=void 0;try{for(var a,o=e[Symbol.iterator]();!(n=(a=o.next()).done)&&(i.push(a.value),!t||i.length!==t);n=!0);}catch(e){s=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(s)throw r}}return i}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.game=t,this.opacityDirection=1,this.menuActiveOpacity=0,this.menuIndex=0,this.menuTitle="Game Menu",this.menuItems=["Start","Intro","Exit"]}return s(e,[{key:"update",value:function(e){var t=this.menuActiveOpacity+e*this.opacityDirection;if((t>1||t<0)&&(this.opacityDirection*=-1),this.menuActiveOpacity+=e*this.opacityDirection,this.game.checkKeyPress(40)||this.game.checkKeyPress(this.game.controls.DOWN)?(this.menuIndex++,this.menuIndex%=this.menuItems.length):(this.game.checkKeyPress(38)||this.game.checkKeyPress(this.game.controls.UP))&&(this.menuIndex--,this.menuIndex<0&&(this.menuIndex=this.menuItems.length-1)),this.game.checkKeyPress(this.game.controls.ENTER)||this.game.checkKeyPress(this.game.controls.FIRE))switch(this.menuIndex){case 0:this.game.setScene(this.game.GameScene);break;case 1:this.game.setScene(this.game.IntroScene);break;case 2:this.game.setScene(this.game.EndScene)}}},{key:"render",value:function(e,t,i){t.fillStyle="#0277bd",t.fillRect(0,0,i.width,i.height),t.font="60px Helvetica",t.textBaseline="top",t.fillStyle="#fff",t.fillText(this.menuTitle,(i.width-t.measureText(this.menuTitle).width)/2,20),t.font="30px Helvetica";var s=!0,r=!1,a=void 0;try{for(var o,l=this.menuItems.entries()[Symbol.iterator]();!(s=(o=l.next()).done);s=!0){var u=o.value,h=n(u,2),c=h[0],f=h[1];c===this.menuIndex&&(t.globalAlpha=this.menuActiveOpacity,t.fillStyle="#089cd3",t.fillRect(0,i.height/2+50*c,i.width,50)),t.globalAlpha=1,t.fillStyle="#fff",t.fillText(f,(i.width-t.measureText(f).width)/2,i.height/2+50*c+10)}}catch(e){r=!0,a=e}finally{try{!s&&l.return&&l.return()}finally{if(r)throw a}}}}]),e}();t.default=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.logoRevealTime=2,this.textTypingTime=5,this.sceneDisplayTime=10,this.elapsedTime=0,this.bigText="Tempest Shadow 🛩",this.infoText="Use WASD for move and SPACE for shoot... ",this.game=t}return n(e,[{key:"update",value:function(e){this.elapsedTime+=e,(this.elapsedTime>=this.sceneDisplayTime||this.game.checkKeyPress(this.game.controls.ENTER))&&this.game.setScene(this.game.MenuScene)}},{key:"render",value:function(e,t,i){if(t.fillStyle="#000",t.fillRect(0,0,i.width,i.height),t.globalAlpha=Math.min(1,this.elapsedTime/this.logoRevealTime),t.font="80px Helvetica",t.fillStyle="#fff",t.fillText(this.bigText,(i.width-t.measureText(this.bigText).width)/2,i.height/2),this.elapsedTime>=this.logoRevealTime){var n=Math.min(1,(this.elapsedTime-this.logoRevealTime)/this.textTypingTime);t.font="20px Helvetica",t.fillStyle="#bbb",t.fillText(this.infoText.substr(0,Math.floor(this.infoText.length*n)),(i.width-t.measureText(this.infoText).width)/2,i.height/2+80)}}}]),e}();t.default=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=c(i(14)),r=c(i(13)),a=c(i(12)),o=c(i(4)),l=c(i(3)),u=c(i(2)),h=c(i(1));function c(e){return e&&e.__esModule?e:{default:e}}var f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t,this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.ctx=this.canvas.getContext("2d"),this.fps=h.default.fps,this.controls=u.default,this.IntroScene=s.default,this.MenuScene=r.default,this.GameScene=a.default,this.EndScene=o.default,this.resourses=(0,l.default)(),this.setScene(s.default),this.initInput(),this.start()}return n(e,[{key:"initInput",value:function(){var e=this;this.keys={},document.addEventListener("keydown",function(t){e.keys[t.which]=!0}),document.addEventListener("keyup",function(t){e.keys[t.which]=!1})}},{key:"checkKeyPress",value:function(e){var t=!!this.keys[e];return this.lastKeyState=this.lastKeyState||{},void 0===this.lastKeyState[e]?(this.lastKeyState[e]=t,!1):this.lastKeyState[e]!==t&&(this.lastKeyState[e]=t,t)}},{key:"setScene",value:function(e){this.activeScene=new e(this)}},{key:"update",value:function(e){this.activeScene.update(e)}},{key:"render",value:function(e){this.ctx.save(),this.activeScene.render(e,this.ctx,this.canvas),this.ctx.restore()}},{key:"start",value:function(){var e=this,t=performance.now(),i=1/this.fps,n=0,s=void 0;requestAnimationFrame(function r(){for(s=performance.now(),n+=(s-t)/1e3;n>i;)n-=i,e.update(i);t=s,e.render(n),requestAnimationFrame(r)})}}]),e}();t.default=f},function(e,t,i){"use strict";var n,s=(n=i(15))&&n.__esModule?n:{default:n},r=document.querySelector("canvas");document.addEventListener("keyup",function(e){e.preventDefault(),84===e.keyCode&&(document.webkitIsFullScreen?document.webkitCancelFullScreen():r.webkitRequestFullScreen?r.webkitRequestFullScreen():r.mozRequestFullScreen())}),new s.default(r)}]);